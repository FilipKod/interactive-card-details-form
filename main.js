"use strict";const cardForm=document.getElementById("cardForm"),cardComplete=document.getElementById("cardComplete"),formButton=document.getElementById("confirmButton"),cardHolderInput=document.getElementById("cardHolder"),cardNumberInput=document.getElementById("cardNumber"),cardExpireMonthInput=document.getElementById("cardExpMonth"),cardExpireYearInput=document.getElementById("cardExpYear"),cardCvcInput=document.getElementById("cardCVC"),cardHolderPreview=document.getElementById("cardHolderPreview"),cardNumberPreview=document.getElementById("cardNumberPreview"),cardExpireMonthPreview=document.getElementById("expireMonthPreview"),cardExpireYearPreview=document.getElementById("expireYearPreview"),cardCvcPreview=document.getElementById("cardCVCPreview"),initHolderPreview=cardHolderPreview&&cardHolderPreview.innerText,initNumberPreview=cardNumberPreview&&cardNumberPreview.innerText,initExpireMonthPreview=cardExpireMonthPreview&&cardExpireMonthPreview.innerText,initExpireYearPreview=cardExpireYearPreview&&cardExpireYearPreview.innerText,initCvcPreview=cardCvcPreview&&cardCvcPreview.innerText,emptyErrorMessage=(cardForm&&cardForm.reset(),null!==cardHolderInput&&void 0!==cardHolderInput&&cardHolderInput.addEventListener("input",function(e){var r=e.target;r&&(r.value=r.value.replace(/\s+/g," ")),setPreview(e,cardHolderPreview,initHolderPreview)}),null!==cardNumberInput&&void 0!==cardNumberInput&&cardNumberInput.addEventListener("input",function(e){var r=e.target;r&&(r.value=r.value.replace(/[^\d]/g,"").replace(/(.{4})/g,"$1 ").trim()),setPreview(e,cardNumberPreview,initNumberPreview)}),null!==cardExpireMonthInput&&void 0!==cardExpireMonthInput&&cardExpireMonthInput.addEventListener("input",function(e){var r=e.target;r&&(r.value=r.value.replace(/[^\d]/g,""),12<+r.value)&&(r.value="12"),setPreview(e,cardExpireMonthPreview,initExpireMonthPreview)}),null!==cardExpireMonthInput&&void 0!==cardExpireMonthInput&&cardExpireMonthInput.addEventListener("change",function(e){e=e.target;e&&(e.value=e.value.replace(/^([1-9]{1})$/g,"0$1"))}),null!==cardExpireYearInput&&void 0!==cardExpireYearInput&&cardExpireYearInput.addEventListener("input",function(e){var r=e.target;r&&(r.value=r.value.replace(/[^\d]/g,"")),setPreview(e,cardExpireYearPreview,initExpireYearPreview)}),null!==cardCvcInput&&void 0!==cardCvcInput&&cardCvcInput.addEventListener("input",function(e){var r=e.target;r&&(r.value=r.value.replace(/[^\d]/g,"")),setPreview(e,cardCvcPreview,initCvcPreview)}),null!==formButton&&void 0!==formButton&&formButton.addEventListener("click",formSubmit),"Can't be blank"),wrongFormatErrorMessage="Wrong format, number only";function formSubmit(e){e.preventDefault(),removeAllErrorMessages();var e=validateCardHolder(),r=validateCardNumber(),t=validateExpireDateMonth(),a=validateExpireDateYear(),n=validateCvc();e&&r&&t&&a&&n&&showCompleteSection()}function validateCardHolder(){return!!cardHolderInput&&(cardHolderInput.value.length?new RegExp(/[^a-z A-Z]/g).test(cardHolderInput.value)?setErrorMessage(cardHolderInput,"Wrong format, alphabetical and space only"):!(cardHolderInput.value.length<3)||setErrorMessage(cardHolderInput,"Cardholder name should be least 3 characters"):setErrorMessage(cardHolderInput,emptyErrorMessage))}function validateCardNumber(){return!!cardNumberInput&&(cardNumberInput.value.length?!!new RegExp(/^[0-9]{16}$/).test(cardNumberInput.value.replace(/ /g,""))||setErrorMessage(cardNumberInput,wrongFormatErrorMessage):setErrorMessage(cardNumberInput,emptyErrorMessage))}function validateExpireDateMonth(){return!!cardExpireMonthInput&&(cardExpireMonthInput.value.length?new RegExp(/[0-9]{2}/g).test(cardExpireMonthInput.value)?!(+cardExpireMonthInput.value<1)||setErrorMessage(cardExpireMonthInput,"Expiration month must be between 1 and 12."):setErrorMessage(cardExpireMonthInput,"Expiration month is incomplete."):setErrorMessage(cardExpireMonthInput,emptyErrorMessage))}function validateExpireDateYear(){var e;return!!cardExpireYearInput&&(e=(new Date).getFullYear().toString().slice(-2),cardExpireYearInput.value.length?new RegExp(/[0-9]{2}/g).test(cardExpireYearInput.value)?!(+cardExpireYearInput.value<+e)||setErrorMessage(cardExpireYearInput,"Expiration year is in the past."):setErrorMessage(cardExpireYearInput,"Expiration year is incomplete."):setErrorMessage(cardExpireYearInput,emptyErrorMessage))}function validateCvc(){return!!cardCvcInput&&(cardCvcInput.value.length?!!new RegExp(/^[0-9]{3}$/g).test(cardCvcInput.value)||setErrorMessage(cardCvcInput,"Wrong format, 3 numbers required"):setErrorMessage(cardCvcInput,emptyErrorMessage))}function setErrorMessage(e,r){var t;return e.parentNode&&((t=document.createElement("p")).classList.add("error-message"),t.innerText=r,e.parentNode.appendChild(t),e.classList.add("error")),!1}function removeAllErrorMessages(){document.querySelectorAll("p.error-message").forEach(e=>{e.remove()}),document.querySelectorAll("input.error").forEach(e=>{e.classList.remove("error")})}function setPreview(e,r,t){e=e.target;r&&t&&e&&(r.innerText=e.value||t)}function showCompleteSection(){cardComplete&&cardForm&&(cardForm.classList.add("hide"),cardComplete.classList.remove("hide"),cardComplete.classList.add("show"))}